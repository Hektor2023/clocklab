\hypertarget{_t_m1638plus___model2_8h_source}{}\doxysection{TM1638plus\+\_\+\+Model2.\+h}
\label{_t_m1638plus___model2_8h_source}\index{extra/TM1638plus-\/master/TM1638plus-\/master/src/TM1638plus\_Model2.h@{extra/TM1638plus-\/master/TM1638plus-\/master/src/TM1638plus\_Model2.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{*\ Project\ Name:\ TM1638plus\_Model2\ }}
\DoxyCodeLine{00003\ \textcolor{comment}{*\ File:\ TM1638plus\_Model2.h}}
\DoxyCodeLine{00004\ \textcolor{comment}{*\ Description:\ TM1638plus\_Model2.h\ header\ file\ Arduino\ library\ for\ Model\ 2\ TM1638\ module(16\ KEY\ 16\ pushbuttons).}}
\DoxyCodeLine{00005\ \textcolor{comment}{*\ Author:\ Gavin\ Lyons.}}
\DoxyCodeLine{00006\ \textcolor{comment}{*\ Created\ August\ 2019}}
\DoxyCodeLine{00007\ \textcolor{comment}{*\ URL:\ https://github.com/gavinlyonsrepo/TM1638plus}}
\DoxyCodeLine{00008\ \textcolor{comment}{*/}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ TM1638PLUS\_MODEL2\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ TM1638PLUS\_MODEL2\_H}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#if\ (ARDUINO\ >=100)}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\ \ \#include\ "{}Arduino.h"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\ \ \#include\ "{}WProgram.h"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}TM1638plus\_common.h"{}}}
\DoxyCodeLine{00021\ \ }
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_t_m1638plus___model2}{TM1638plus\_Model2}}\ \ \{}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{//\ Constructor\ Init\ the\ module}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{comment}{//\ parameters\ }}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{comment}{//\ 1.\ strobe\ =\ GPIO\ connected\ to\ strobe\ line\ of\ module}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{comment}{//\ 2.\ clock\ =\ GPIO\ connected\ to\ clock\ line\ of\ module}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//\ 3.\ data\ =\ GPIO\ connected\ to\ data\ line\ of\ module}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{//\ 4.\ swap\_nibbles\ =\ boolean\ default\ false,\ if\ true\ swaps\ nibbles\ on\ display\ byte}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{//\ 5.\ high\_freq\ Changes\ the\ value\ of\ parameter\ \_HIGH\_FREQ\ which\ is\ default\ false}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{//\ This\ is\ used\ when\ running\ high\ freq\ MCU\ CPU\ (\string~>100Mhz)\ because\ of\ issues\ with\ button\ function.}}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{comment}{//\ Pass\ true\ when\ running\ high\ freq\ MCU\ CPU\ (\string~>100Mhz).}}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{class_t_m1638plus___model2}{TM1638plus\_Model2}}(uint8\_t\ strobe,\ uint8\_t\ clock,\ uint8\_t\ data,\ \textcolor{keywordtype}{bool}\ swap\_nibbles=\ \textcolor{keyword}{false},\textcolor{keywordtype}{bool}\ high\_freq\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00036\ \ \ \ \ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//\ Methods}}
\DoxyCodeLine{00038\ \ \ \ \ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ Begin\ method\ ,\ sets\ pinmodes\ ,\ Call\ in\ setup}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{void}\ displayBegin(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{void}\ reset(\textcolor{keywordtype}{void});\ \ \ \ \ \ \textcolor{comment}{//\ Reset\ /\ Clear\ module\ }}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ Sets\ the\ brightness\ level\ on\ a\ scale\ of\ brightness\ =\ 0\ to\ 7.}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\ 0\ is\ not\ turned\ off,\ it's\ just\ the\ lowest\ brightness.}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ If\ user\ wishes\ to\ change\ the\ default\ brightness\ at\ start-\/up\ change.}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ The\ DEFAULT\_BRIGHTNESS\ define\ in\ header\ file.}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{void}\ brightness(uint8\_t\ brightness);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ Function\ Desc:Read\ push\ buttons\ function\ }}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ User\ may\ have\ to\ deb-\/ounce\ buttons\ depending\ on\ application.}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ See\ [URL\ LINK](https://github.com/gavinlyonsrepo/Arduino\_Clock\_3)\ }}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ For\ de-\/bounce\ practical\ example(model\ 1)}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ model\ 2\ example\ here\ in\ ADC\ file\ TM1638plus\_ADC\_TEST\_Model2.ino.}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Note\ there\ are\ two\ different\ read\ button\ functions\ See\ Also\ ReadKeyTwo}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ Returns:\ zero\ if\ no\ button\ pressed.\ \ }}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Returns:\ a\ byte\ with\ decimal\ value\ of\ buttons\ 1-\/16\ (1\ for\ S1\ 2\ for\ S2\ ...\ 16\ for\ S16\ ).}}
\DoxyCodeLine{00058\ \ \ \ uint8\_t\ ReadKey16(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Function\ Desc:\ Reads\ the\ push\ \ buttons:\ \ alternate\ function\ to\ ReadKeys16}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Can\ detect\ multiple\ key\ presses\ ,\ See\ notes\ section\ in\ readme\ regarding}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Problems\ with\ seven\ segment\ display\ when\ pressing\ certain\ keys\ in\ combination}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ Returns:\ A\ 16\ bit\ integer\ where\ each\ bit\ correpsond\ to\ a\ switch}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Eg:}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ S1\ =\ 0x0001}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ S16\ =\ 0x8000}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ S16\ +\ S1\ together\ =\ 0x8001}}
\DoxyCodeLine{00068\ \ \ \ \ uint16\_t\ ReadKey16Two(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00069\ \ \ \ \ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Send\ seven\ segment\ value\ module}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ pass\ segment\ \ 0-\/7,\ byte\ of\ data\ corresponding\ to\ segments\ abcdefg(dp)\ 01234567.}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ a\ is\ 0\ ,\ dp\ is\ 7\ ,\ segmentValue\ is\ which\ segments\ are\ off\ or\ on\ for\ each\ digit.\ d7d6d5d54d3d2d1\ }}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ Have\ to\ call\ it\ 8\ times\ in\ row\ to\ set\ all\ segments.\ }}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ to\ set\ all\ "{}a"{}\ on\ send\ (0x00,0xFF)}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ to\ set\ all\ segment\ "{}g"{}\ off\ (0x06,0X00)}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ DisplaySegments(uint8\_t\ segment,\ uint8\_t\ segmentValue);}
\DoxyCodeLine{00077\ \ \ \ \ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ Display\ a\ Hexadecimal\ number\ ,}}
\DoxyCodeLine{00079\ \ \ \ \ \ \textcolor{comment}{//\ Param\ 1\ ::\ upper\ nibble\ integer\ 2\string^16\ }}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ Param\ 2\ ::\ lower\ nibble\ integer\ 2\string^16\ }}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Param\ 3\ ::\ byte\ dots\ turn\ on\ decimal\ points}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ Param\ 4\ ::\ bool\ leading\ zeros\ ,\ true\ on\ ,\ false\ off}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ Param\ 5\ ::\ enum\ text\ alignment\ ,\ left\ or\ right\ alignment}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ converts\ to\ string\ internally}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ DisplayHexNum(uint16\_t\ \ numberUpper,\ uint16\_t\ numberLower,\ \textcolor{keywordtype}{byte}\ dots,\ \textcolor{keywordtype}{boolean}\ leadingZeros\ =\ \textcolor{keyword}{true},\ AlignTextType\_e\ =\ TMAlignTextLeft);}
\DoxyCodeLine{00086\ \ \ \ \ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ Display\ a\ decimal\ number\ ,}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Param\ 1\ ::\ 2\string^32\ unsigned\ long}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ Param\ 2\ ::\ byte\ for\ decimal\ point\ display\ switch's\ on\ decimal\ point\ for\ those\ positions}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ Param\ 3\ ::\ leading\ zeros\ ,\ true\ on\ ,\ false\ off}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Param\ 4\ ::\ enum\ text\ alignment\ ,\ \ left\ or\ right}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ converts\ to\ string\ internally}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{void}\ DisplayDecNum(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ number,\ \textcolor{keywordtype}{byte}\ dots,\ \textcolor{keywordtype}{boolean}\ leadingZeros\ =\ \textcolor{keyword}{true},\ AlignTextType\_e\ =\ TMAlignTextLeft);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//\ Display\ a\ string\ ,\ takes\ a\ string\ and\ byte\ for\ decimal\ point\ display}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ Takes\ in\ string\ ,\ converts\ it\ to\ ASCII\ using\ the\ font\ and\ masks\ for\ the\ decimal\ point}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Then\ passes\ array\ of\ eight\ ASCII\ bytes\ to\ DisplayValues\ function}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{void}\ DisplayStr(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \textcolor{keywordtype}{string},\ \textcolor{keyword}{const}\ word\ dots\ =\ 0);}
\DoxyCodeLine{00099\ \ \ \ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Takes\ in\ Array\ of\ 8\ ASCII\ bytes\ ,\ Called\ from\ DisplayStr\ }}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ Scans\ each\ ASCII\ byte\ converts\ to\ array\ of\ 8\ segment\ bytes\ where\ each\ byte\ represents\ a\ segment}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ i.e.\ byte\ 0\ represents\ a\ in\ segment\ and\ then\ each\ bit\ represents\ the\ a\ segment\ in\ each\ digit.}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{//\ So\ for\ "{}00000005"{}\ is\ converted\ by\ DisplayStr\ to\ hex\ "{}3F\ 3F\ 3F\ 3F\ 3F\ 3F\ 3F\ 6D"{}\ where\ left\ is\ first\ digit.}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//\ this\ is\ converted\ to\ hex\ "{}FF\ FE\ FF\ FF\ FE\ FF\ 01\ 00"{}\ \ Where\ left\ is\ first\ segment}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ So\ "{}a"{}\ segment\ is\ turned\ on\ for\ all\ bytes\ and\ "{}b"{}\ is\ on\ for\ all\ except\ last\ digit.}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ The\ bits\ are\ \ mapping\ below\ abcdefg(dp)\ =\ 01234567\ !\ }}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ see\ for\ mapping\ of\ seven\ segment\ to\ digit\ https://en.wikipedia.org/wiki/Seven-\/segment\_display}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{void}\ ASCIItoSegment(\textcolor{keyword}{const}\ \textcolor{keywordtype}{byte}\ values[]);}
\DoxyCodeLine{00109\ \ \ \ \ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//Divides\ the\ display\ into\ two\ nibbles\ and\ displays\ a\ Decimal\ number\ in\ each.}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ Param\ 1\ ::\ upper\ nibble\ integer\ 2\string^16\ }}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ Param\ 2\ ::\ lower\ nibble\ integer\ 2\string^16\ }}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ Param\ 3\ ::\ byte\ dots\ turn\ on\ decimal\ points}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ Param\ 4\ ::\ bool\ leading\ zeros\ ,\ true\ on\ ,\ false\ off}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{comment}{//\ Param\ 5\ ::\ enum\ text\ alignment\ ,\ left\ or\ right\ alignment}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ DisplayDecNumNibble(uint16\_t\ numberUpper,\ uint16\_t\ numberLower,\ \textcolor{keywordtype}{byte}\ dots,\ \textcolor{keywordtype}{boolean}\ leadingZeros\ =\ \textcolor{keyword}{true},\ AlignTextType\_e\ =\ TMAlignTextLeft);}
\DoxyCodeLine{00117\ \ \ \ \ }
\DoxyCodeLine{00118\ \ \ \ \ }
\DoxyCodeLine{00119\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ sendCommand(uint8\_t\ value);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ sendData(uint8\_t\ \ data);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ uint8\_t\ \_STROBE\_IO;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ uint8\_t\ \_DATA\_IO;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ uint8\_t\ \_CLOCK\_IO;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \_SWAP\_NIBBLES=\ \textcolor{keyword}{false};\ \ \ \ \ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//This\ is\ used\ when\ running\ high\ freq\ CPU\ because\ of\ issues\ with\ button\ function.}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \_HIGH\_FREQ\ =\ \textcolor{keyword}{false};\ \ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_t_m1638plus__common}{TM1638plus\_common}}\ \ TM\_common;}
\DoxyCodeLine{00130\ \};}
\DoxyCodeLine{00131\ \ }
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
